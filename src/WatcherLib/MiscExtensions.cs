//#nullable enable 

//using PW.IO.FileSystemValueObjects;
//using System;
//using System.Collections.Generic;
//using System.Linq;
//using System.Text;
//using System.Threading.Tasks;

//namespace ImageDeduper
//{
//  internal static class MiscExtensions
//  {
//    //public void TryOpenForRead(FilePath file)
//    //{
//    //    if (file is null)           throw new ArgumentNullException(nameof(file));



//    //    return Disposable.DisposeAfter(file.OpenFileSharedRead(), x => x.IsInvalid)
//    //      ? Marshal.GetLastWin32Error() == ERROR_SHARING_VIOLATION
//    //      : false;

//    //    //using var fileHandle = file.OpenFileSharedRead();
//    //    //return fileHandle.IsInvalid 
//    //    //  ? Marshal.GetLastWin32Error() == ERROR_SHARING_VIOLATION
//    //    //  : false;

//    //}


//  }
//}
